# Covid-19 Model Evaluations
Repository for placing code related to COVID-19 model evaluations. The purpose is to evaluate the predictive capability
of the models currently being used to predict deaths and medical resources needed.

- [Paper Evaluation IHME â€“ arXiv](https://arxiv.org/abs/2004.04734)

## Installation

### Pre-requisits

1) You require Python 3 to run the backend analytics and Postgresql to handle the database.
    
    Ubuntu
    ```
    sudo apt-get install python3
    sudo apt-get install python3-pip
    ```
    
    MacOS
    ```
    brew install python3
    ```
   
2) Best practice is to use a virtual environment to ensure all packages are compatible with the specific version of the code:

    ```
    pip3 install virtualenv
    cd <project-path>
    virtualenv -p python3 <project-path>
    source <project-path>/bin/activate
    ```

3) Download Python package requirements, which are detailed in the "requirements.txt" file. These
dependencies can be installed by executing:

    ```
    cd <project-path>
    pip install -r requirements.txt
    ```

## Excecution

```
cd <project-path>
python main.py
```

## Results

Results are automatically generated by main.py and stored on data/output_data.csv. This repository currently contains
the output data which is used to generate the plots in the [paper](https://arxiv.org/abs/2004.04734).

The output csv file contains the prediction accuracy metrics for each target date based on IHME predictions.
These metrics include Percentage Error, Absolute Percentage Error, Adjusted Percentage Error, Absolute Adjusted Percentage Error, and Logistic Aboslute Percentage Error, Actual observation within prediction interval and the amount by which observation is outside prediction interval (outside_by).

The columns of the resulting csv file are the following:

| Column Name      |  Units | Description           |
| ----------------:|-----------------------| ----- |
| target_date      | date | Actual date for which true observations are recorded and predictions evaluated |
| forecast_date    | date | Date for when the forecast was generated |
| lookahead        | days | target_date - forecast_date |
| model_name       | string | Name of model or institution producing the estimates | 
| state_long    | string | Actual name of state, country or other location |
| state_short   | string | Abbreviation of long name of state, country or other location | 
| ev   | double | Value of the expected number of daily deaths according to IHME | 
| lb   | double | Lower bound for the prediction interval according to IHME |
| ub   | double | Upper bound for the prediction interval according to IHME |
| gt_jhu           | integer | Observed daily deaths according to John Hopkins University |
| gt_nyt           | integer | Observed daily deaths according to New York Times |
| gt_ihme           | integer | Observed daily deaths according to IHME |
| gt           | integer | Observed daily deaths according JHU for all states, except for New York, where NYT gt is used. |
| error            | double | Error in prediction (gt - expected_value) |
| pe               | double | Percentage Error |
| adj_pe           | double | Adjusted Percentage Error |
| ape              | double | Absolute Percentage Error |
| adj_ape          | double | Adjusted Absolute Percentage Error |
| logistic_ape     | double | Logistic Absolute Percentage Error |
| logistic_adj_ape | double | Logistic Adjusted Absolute Percentage Error |
| within_95_pi     | string | inside, above or below of the 95% prediction intervals |
| outside_95p_by   | double | if inside 0, if outside is the amount by which it is outside of the 95% prediction interval |

